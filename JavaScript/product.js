let arr = {
    "product": [{
        "id": "PKBT0000",
        "name": "Balo Rivacase",
        "made_in": "Đức",
        "description": "",
        "price": "799000",
        "images": ["balo-rivacase-7560-m-grey-969-01594277351.jpeg",
            "rivacase-7560-m-grey-2.jpeg",
            "rivacase-7560-m-grey.jpeg",
            "rivacase-7560-m-grey-4.jpeg",
            "rivacase-7560-m-grey-7.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0001",
        "name": "Balo Kmore The Abel Backpack",
        "made_in": "Việt Nam",
        "description": "",
        "price": "500000",
        "images": ["balo-kmore-the-abel-backpack-km-tabp003-m-dark-tan-13540-51663296227.jpeg",
            "balo-kmore-the-abel-backpack-km-tabp003-m-dark-tan-13540-41663296227.jpeg",
            "balo-kmore-the-abel-backpack-km-tabp003-m-dark-tan-13540-31663296227.jpeg",
            "balo-kmore-the-abel-backpack-km-tabp003-m-dark-tan-13540-01663296226.jpeg",
            "balo-kmore-the-abel-backpack-km-tabp003-m-dark-tan-13540-11663296226.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0002",
        "name": "Balo Seliux F4 Phantom II Backpack",
        "made_in": "Việt Nam",
        "description": "",
        "price": "750000",
        "images": ["seliux-f4-phantom-ii-backpack-m-black-red-2.jpeg",
            "seliux-f4-phantom-ii-backpack-m-black-red.jpeg",
            "seliux-f4-phantom-ii-backpack-m-black-red-3.jpeg",
            "seliux-f4-phantom-ii-backpack-m-black-red-4.jpeg",
            "seliux-f4-phantom-ii-backpack-m-black-red-5.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0003",
        "name": "Balo Rivacase 8365",
        "made_in": "Đức",
        "description": "",
        "price": "1950000",
        "images": ["balo-rivacase-8365-m-blue-7632-01653894040.jpeg",
            "rivacase-8365-m-blue.jpeg",
            "rivacase-8365-m-blue-3.jpeg",
            "rivacase-8365-m-blue-4.jpeg",
            "rivacase-8365-m-blue-5.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0004",
        "name": "Balo Herschel Heritage Standard",
        "made_in": "Canada",
        "description": "",
        "price": "2299000",
        "images": ["balo-herschel-heritage-standard-15-backpack-m-navy-1-12931-21638264487.jpeg",
            "balo-herschel-heritage-standard-15-backpack-m-navy-1-12931-01638264486.jpeg",
            "balo-herschel-heritage-standard-15-backpack-m-navy-1-12931-31638264487.jpeg",
            "balo-herschel-heritage-standard-15-backpack-m-navy-1-12931-11638264486.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0005",
        "name": "Balo AGVA Stella",
        "made_in": "Singapore",
        "description": "",
        "price": "1050000",
        "images": ["agva-stella-13-3-ltb351denimblue-m-blue.jpeg",
            "agva-stella-13-3-ltb351denimblue-m-blue-2.jpeg",
            "agva-stella-13-3-ltb351denimblue-m-blue-3.jpeg",
            "agva-stella-13-3-ltb351denimblue-m-blue-4.jpeg",
            "agva-stella-13-3-ltb351denimblue-m-blue-5.jpeg",
            "agva-stella-13-3-ltb351denimblue-m-blue-6.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0006",
        "name": "Balo Parkland Edison",
        "made_in": "Việt Nam",
        "description": "",
        "price": "1099000",
        "images": ["balo-parkland-edison-20020-00364-os-s-peachy-12645-01640748905.jpeg",
            "balo-parkland-edison-20020-00364-os-s-peachy-12645-01640748910.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0007",
        "name": "Balo Tomtoc",
        "made_in": "Mỹ",
        "description": "",
        "price": "1079000",
        "images": ["tomtoc-a71-d01x10-s-black-purple.jpeg",
            "tomtoc-a71-d01x10-s-black-purple-2.jpeg",
            "tomtoc-a71-d01x10-s-black-purple-3.jpeg",
            "tomtoc-a71-d01x10-s-black-purple-4.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0008",
        "name": "Balo Reeyee RY103B",
        "made_in": "Trung Quốc",
        "description": "",
        "price": "1320000",
        "images": ["reeyee-ry1020-17-m-black.jpeg",
            "reeyee-ry1020-17-m-black-4.jpeg",
            "reeyee-ry1020-17-m-black-2.jpeg",
            "reeyee-ry1020-17-m-black-3.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0009",
        "name": "Balo Solo Re:cover",
        "made_in": "Mỹ",
        "description": "",
        "price": "1550000",
        "images": ["balo-solo-recover-15-6-ubn761-10-backpack-m-grey-13270-01655281810.jpeg",
            "balo-solo-recover-15-6-ubn761-10-backpack-m-grey-13270-21655281810.jpeg",
            "balo-solo-recover-15-6-ubn761-10-backpack-m-grey-13270-01655283881.jpeg",
            "balo-solo-recover-15-6-ubn761-10-backpack-m-grey-13270-41655281811.jpeg",
            "balo-solo-recover-15-6-ubn761-10-backpack-m-grey-13270-51655281811.jpeg",
            "balo-solo-recover-15-6-ubn761-10-backpack-m-grey-13270-71655281811.jpeg",
            "balo-solo-recover-15-6-ubn761-10-backpack-m-grey-13270-81655281811.jpeg",
            "balo-solo-recover-15-6-ubn761-10-backpack-m-grey-13270-91655281811.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0010",
        "name": "Balo Mikkor The Edwin Backpack",
        "made_in": "Việt Nam",
        "description": "",
        "price": "649000",
        "images": ["mikkor-the-edwin-backpack-m-black.jpeg",
            "mikkor-the-edwin-backpack-m-black-2.jpeg",
            "mikkor-the-edwin-backpack-m-black-3.jpeg",
            "mikkor-the-edwin-backpack-m-black-4.jpeg",
            "mikkor-the-edwin-backpack-m-black-5.jpeg",
            "mikkor-the-edwin-backpack-m-black-6.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0011",
        "name": "Balo Beam Backpack Solar Power Backpack K9386W",
        "made_in": "Trung Quốc",
        "description": "",
        "price": "3718000",
        "images": ["beam-backpack-solar-power-backpack-k9386w-m-black-7.jpeg",
            "beam-backpack-solar-power-backpack-k9386w-m-black.jpeg",
            "beam-backpack-solar-power-backpack-k9386w-m-black-8.jpeg",
            "beam-backpack-solar-power-backpack-k9386w-m-black-5.jpeg",
            "beam-backpack-solar-power-backpack-k9386w-m-black-10.jpeg",
            "beam-backpack-solar-power-backpack-k9386w-m-black-4.jpeg",
            "beam-backpack-solar-power-backpack-k9386w-m-black-3.jpeg",
            "beam-backpack-solar-power-backpack-k9386w-m-black-2.jpeg",
            "beam-backpack-solar-power-backpack-k9386w-m-black-6.jpeg",
            "beam-backpack-solar-power-backpack-k9386w-m-black-9.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0012",
        "name": "Balo Simplecarry E-City 2",
        "made_in": "Việt Nam",
        "description": "",
        "price": "690000",
        "images": ["balo-simplecarry-e-city-2-m-flower-11966-11608085313.jpeg",
            "balo-simplecarry-e-city-2-m-flower-11966-01608085312.jpeg",
            "balo-simplecarry-e-city-2-m-flower-11966-21608085313.jpeg",
            "balo-simplecarry-e-city-2-m-flower-11966-31608085313.jpeg",
            "balo-simplecarry-e-city-2-m-flower-11966-41608085313.jpeg"
        ],
        "clasify": ["phụ kiện", "balo"],
        "status": "1"
    }, {
        "id": "PKBT0013",
        "name": "Túi đeo chéo YUUMY YN98D",
        "made_in": "Việt Nam",
        "description": "",
        "price": "570000",
        "images": ["tui-deo-cheo-khoa-nhan-yuumy-yn98-FADODA-Quan-12-Nguyen-anh-thu-5-897x897.jpeg",
            "tui-deo-cheo-khoa-nhan-yuumy-yn98-FADODA-Quan-12-Nguyen-anh-thu-6-1-897x897.jpeg",
            "tui-deo-cheo-khoa-nhan-yuumy-yn98-FADODA-Quan-12-Nguyen-anh-thu-8-1-897x897.jpeg",
            "z3258710857339_3161b6dcad7d3b0508f525d035acda4b-1-897x897.jpeg"
        ],
        "clasify": ["phụ kiện", "Túi xách"],
        "status": "1"
    }, {
        "id": "PKDH0000",
        "name": "Đồng Hồ Thông Minh Fossil FTW6036",
        "made_in": "Mỹ",
        "description": "",
        "price": "7970000",
        "images": ["FTW6036_Desktop_1.jpeg",
            "FTW6036_Desktop_2.jpeg",
            "FTW6036_Desktop_3.jpeg"
        ],
        "clasify": ["phụ kiện", "Đồng hồ"],
        "status": "1"
    }, {
        "id": "PKDH0001",
        "name": "PAGINI PA002218",
        "made_in": "Việt Nam",
        "description": "",
        "price": "692000",
        "images": ["545b27db56729b14f4f0b02506075461.jpeg",
            "d8bf4f6eac84fb7bad9c2f1f91237e08.jpeg",
            "fa7ead3b6720d6d1d368efc2e7670185.jpeg",
            "481a5d4d5a205d330f6781a03282a4ff.jpeg",
            "86d4b167fbfe62d3de53905264e14913.jpeg",
            "abd2a43695ce8c876253f7f5f4235c2f.jpeg"
        ],
        "clasify": ["phụ kiện", "Đồng hồ"],
        "status": "1"
    }, {
        "id": "AOCTNU00",
        "name": "DSS CROPTOP SIGN",
        "made_in": "Việt Nam",
        "description": "",
        "price": "692000",
        "images": ["ao-croptop-local-brand-davies-nu.jpeg",
            "ao-croptop-local-brand-davies-dep.jpeg",
            "ao-croptop-nu-sign.jpeg",
            "ao-croptop-local-brand-nu-dep.jpeg"
        ],
        "clasify": ["Áo", "Croptop"],
        "status": "1"
    }, {
        "id": "QUQTNA00",
        "name": "Quần Tây Slim-fit ICON DENIM",
        "made_in": "Việt Nam",
        "description": "",
        "price": "400000",
        "images": ["c0d0aac7c1bf69e6ec647881f3616e36.jpeg",
            "fe4988db9c85a7dc761c5912b7bc01c9.jpeg",
            "d5f280cdae449338d846d4633ddb36b3.jpeg",
            "9d347f0826f26b34a9c4f5b99ef8a652.jpeg",
            "ebf2f138a0326c16f921e6f9b8f460f0.jpeg"
        ],
        "clasify": ["Quần", "Quần tây"],
        "status": "1"
    }, {
        "id": "QUQTNA01",
        "name": "Quần Âu Nam Phối Cạp Chun",
        "made_in": "Việt Nam",
        "description": "",
        "price": "260000",
        "images": ["a2d2154b263d7ad0112b70473995a86c.jpeg",
            "948559836b645ec7a72d292e7277499c_tn.jpeg"
        ],
        "clasify": ["Quần", "Quần tây"],
        "status": "1"
    }],
    "promote": [{
        "id": "SALE0000",
        "name": "Sale 25%",
        "image": "",
        "content": "",
        "discount_price": "0",
        "discount_percent": "25",
        "date_begin": "",
        "date_end": "",
        "products": [{
            "id": "PKBT0000",
        }, {
            "id": "PKDH0001",

        }],
        "status": "1"
    }, {
        "id": "SALE0001",
        "name": "Sale 12%",
        "image": "",
        "content": "",
        "discount_price": "0",
        "discount_percent": "12",
        "date_begin": "",
        "date_end": "",
        "products": [{
            "id": "PKBT0002",
            "id": "QUQTNA01"
        }],
        "status": "1"
    }, {
        "id": "SALE0002",
        "name": "Sale 35%",
        "image": "",
        "content": "",
        "discount_price": "0",
        "discount_percent": "35",
        "date_begin": "",
        "date_end": "",
        "products": [{
            "id": "PKBT0007",
        }, {
            "id": "PKBT0011",
        }, {
            "id": "QUQT0000",
        }],
        "status": "1"
    }, {
        "id": "SALE0003",
        "name": "Sale 50%",
        "image": "",
        "content": "",
        "discount_price": "0",
        "discount_percent": "50",
        "date_begin": "",
        "date_end": "",
        "products": [{
            "id": "PKDH0000",
        }],
        "status": "1"
    }],
    "size": [{
        "id": "",
        "shoulderIndex": "",
        "backIndex": "",
        "bellyIndex": "",
        "legLength": "",
        "armLength": "",
        "thighLength": "",
        "calfIndex": "",
        "buttIndex": ""
    }],
    "largeClassify": [{
        "id": "AO",
        "name": "Áo",
        "miniClassify": [{
            "id": "AOCTNU",
            "name": "Áo croptop"
        }, {
            "id": "AONU0001",
            "name": "Áo sơ mi"
        }, {
            "id": "AONU0002",
            "name": "Áo dài tay"
        }, {
            "id": "AONU0003",
            "name": "Áo ngắn tay"
        }, {
            "id": "AONU0004",
            "name": "Áo peter pan"
        }, {
            "id": "AONA0000",
            "name": "Áo khoác"
        }, {
            "id": "AONA0001",
            "name": "Áo vest"
        }, {
            "id": "AONA0002",
            "name": "Áo hoodie"
        }, {
            "id": "AONA0003",
            "name": "Áo thun"
        }, {
            "id": "AONA0000",
            "name": "Áo sơ mi"
        }]
    }, {
        "id": "QU",
        "name": "Quần",
        "miniClassify": [{
            "id": "QUNU0000",
            "name": "Chân váy"
        }, {
            "id": "QUNU0001",
            "name": "Quần skinny"
        }, {
            "id": "QUNU0002",
            "name": "Quần legging"
        }, {
            "id": "QUNU0003",
            "name": "Quần giả váy"
        }, {
            "id": "QUNU0004",
            "name": "Quần baggy"
        }, {
            "id": "QUNU0005",
            "name": "Quần short"
        }, {
            "id": "QUNU0006",
            "name": "Quần ống suông"
        }, {
            "id": "QUQTNA",
            "name": "Quần Tây"
        }, {
            "id": "QUNA0001",
            "name": "Quần Kaki"
        }, {
            "id": "QUNA0002",
            "name": "Quần Baggy"
        }, {
            "id": "QUNA0003",
            "name": "Quần short"
        }, {
            "id": "QUNA0004",
            "name": "Quần túi hộp"
        }]
    }, {
        "id": "PK",
        "name": "Phụ kiện nam - nữ",
        "miniClassify": [{
            "id": "PKDH",
            "name": "Đồng hồ"
        }, {
            "id": "PKTL",
            "name": "Thắt lưng"
        }, {
            "id": "PKBT",
            "name": "Balo / túi xách"
        }]
    }],
    "receipt": [{
        "id": "RE0000",
        "idStaff": "NV0000",
        "idCustomer": "KH0000",
        "nameCustomer": "Nguyễn Minh Thao",
        "date_init": "",
        "date_confirm": "",
        "list_prod": [{
            "idSize": "",
            "idProd": "",
            "amount": "",
            "price": ""
        }],
        "status": ""
    }],
    "customer": [{
        "id": "KH0000",
        "name": "Nguyễn Minh Thao",
        "data_init": "",
        "username": "thaonguyen",
        "password": "290702",
        "sex": "Nam",
        "birth_day": "2002-07-29",
        "number_phone": "0396290702",
        "image": " ",
        "address": " ",
        "cart": [{
            "idProd": "PKBT0008",
            "idSize": "",
            "amount": "3",
            "price": "3960000"
        }],
        "status": "Đang hoạt động"
    }],
    "prodInStock": [{
        "idInput": "IS0000",
        "idProd": "PKBT0008",
        "idSize": "",
        "amount": "300",
        "price": "1320000"
    }]
}
let pathImg = {
        "Path": [
            "Image/PK/PKBT/PKBT0000/",
            "Image/PK/PKBT/PKBT0001/",
            "Image/PK/PKBT/PKBT0002/",
            "Image/PK/PKBT/PKBT0003/",
            "Image/PK/PKBT/PKBT0004/",
            "Image/PK/PKBT/PKBT0005/",
            "Image/PK/PKBT/PKBT0006/",
            "Image/PK/PKBT/PKBT0007/",
            "Image/PK/PKBT/PKBT0008/",
            "Image/PK/PKBT/PKBT0009/",
            "Image/PK/PKBT/PKBT0010/",
            "Image/PK/PKBT/PKBT0011/",
            "Image/PK/PKBT/PKBT0012/",
            "Image/PK/PKBT/PKBT0013/",
            "Image/PK/PKDH/PKDH0000/",
            "Image/PK/PKDH/PKDH0001/",
            "Image/AO/AOCTNU/AOCTNU00/",
            "Image/QU/QUQTNA/QUQTNA00/",
            "Image/QU/QUQTNA/QUQTNA01/"
        ]
    }
    // let b = JSON.parse(JSON.stringify(arr))
let spaceProduct = document.getElementById("space-product")
let onclickProduct = document.getElementById("onclick-product")
    // localStorage.setItem("data", JSON.stringify(arr))

function getPromote(id) {
    for (let i = 0; i < data.promote.length; i++) {
        for (let j = 0; j < data.promote[i].products.length; j++) {
            if (data.promote[i].products[j].id == id) {
                return [i, j]
            }
        }
    }
    return -1
}
let arrProduct = new Array()

function getProduct(id) {
    // console.log(id)
    for (let i = 0; i < data.product.length; i++) {
        if (data.product[i].id.indexOf(id) != -1) {
            arrProduct.push(data.product[i])
        }
    }
}

function getPath(id, path) {
    path.Path.forEach(element => {
        if (element.indexOf(id) != -1) {
            pathImage.push(element)
        }
    });
}

function createPageProduct(root, textTitle, idPr, proInpage) {
    pathImage.length = 0
    arrProduct.length = 0
    path = JSON.parse(JSON.stringify(pathImg))
    getProduct(idPr)
    getPath(idPr, path)
        // console.log(arrProduct)
        // console.log(pathImage)
    let title = document.createElement("div")
    title.id = "div-title"
    let node = document.createTextNode(textTitle)
    title.appendChild(node)
    root.appendChild(title)
    if (arrProduct.length > 0) {
        let divUl = document.createElement("div")
        divUl.id = "div-list"
        divUl.appendChild(addListProduct(idPr, proInpage))
        root.appendChild(divUl)
        createPageNumber(idPr, arrProduct, proInpage)
    }
}
let pathImage = new Array()

function addListProduct(id, proInpage) {
    // console.log(id)
    let start = (currentPage - 1) * proInpage
    let end = (currentPage) * proInpage
    if (end > arrProduct.length) {
        end = arrProduct.length
    }
    let ulList = document.createElement("ul")
    ulList.id = "list-product"
    ulList.className = "list-product"
    if (id.indexOf("PK") != -1) {
        document.getElementById("left").style.display = "none"
        ulList.style.gridTemplateColumns = "1fr 1fr 1fr 1fr"
        document.getElementById("space-product").style.width = "100%"
            // console.log("log")
    } else {
        document.getElementById("left").style.display = "block"
        ulList.style.gridTemplateColumns = "1fr 1fr 1fr"
        document.getElementById("space-product").style.width = "80%"
    }
    for (let i = start; i < end; i++) {
        let discountPrice = "0"
        let cost = "0"
        let promot = getPromote(arrProduct[i].id)
            // console.log(promot)
        if (promot == -1) {
            discountPrice = arrProduct[i].price
            cost = "0"
        } else {
            cost = arrProduct[i].price
            discountPrice = parseInt(cost) - parseInt(data.promote[promot[0]].discount_price) - parseInt(data.promote[promot[0]].discount_percent) / 100 * cost
        }
        ulList.appendChild(createListProduct(
            pathImage[i],
            arrProduct[i].images,
            arrProduct[i].name,
            discountPrice,
            cost,
            arrProduct[i].made_in,
            arrProduct[i].id,
            arrProduct[i].clasify))
    }
    return ulList
}

function createListProduct(path, img, nameProduct, price, sale, madeIn, id, clasify) {

    let liItem = document.createElement("li")
    liItem.className = "product-item"
    let imgTag = document.createElement("img")
    imgTag.src = path + img[0]
    liItem.appendChild(imgTag)
    imgTag.style.objectFit = "cover"
    let namePro = document.createElement("div")
    namePro.appendChild(document.createTextNode(nameProduct))
    let divContent = document.createElement("div")
    divContent.className = "product-content"
    divContent.appendChild(namePro)
    divContent.style.paddingTop = "10px"
    liItem.appendChild(divContent)
    let salePrice = document.createElement("div")
    salePrice.style.marginTop = "10px"
    salePrice.style.color = "red"
    let cost = document.createElement("del")
    cost.appendChild(document.createTextNode(calculated(sale) + " VND"))
    cost.className = "cost"
    if (sale != "0") {
        salePrice.appendChild(cost)
    } else {
        salePrice.style.justifyContent = "center"
    }
    salePrice.appendChild(document.createTextNode(calculated(price) + " VND"))
    salePrice.style.display = "flex"
    divContent.appendChild(salePrice)
    liItem.onclick = function() {
        productTag.style.display = "flex"
        showacc(onclickProduct, -500, 0)
        onclickProduct.appendChild(showProduct(path, img, nameProduct, madeIn, id, clasify, price))
    }
    return liItem
}
// let cur = 30


function showProduct(path, img, text, madein, id, clasify, price) {
    inStock.length = 0
    getAmount(id)
    let textMadein = "Xuất xứ: " + madein
    let textID = "Mã sản phẩm: " + id
    let divTag = document.createElement("div")
    let imgTag = document.createElement("img")
    imgTag.src = path + img[0]
    imgTag.style.height = "400px"
    imgTag.style.borderRadius = "20px"
    let divSelect = document.createElement("div")
    divSelect.appendChild(imgTag)
    divSelect.appendChild(previewImg(path, img, imgTag))
    divTag.id = "tagdivProduct"
    let contentDiv = document.createElement("div")
    contentDiv.style.fontSize = "16px"
    contentDiv.style.position = "relative"
    contentDiv.style.marginLeft = "10px"
    let nameProduct = document.createElement("div")
    nameProduct.appendChild(document.createTextNode(text))
    nameProduct.style.fontSize = "25px"
    nameProduct.style.marginTop = "30px"
    nameProduct.style.textAlign = "center"
    let madeIn = document.createElement("div")
    madeIn.appendChild(document.createTextNode(textMadein))
    madeIn.style.marginTop = "30px"
    let idProduct = document.createElement("div")
    idProduct.appendChild(document.createTextNode(textID))
    idProduct.style.marginTop = "15px"
    let sizeProduct = document.createElement("div")
    let btnAdd = document.createElement("div")
    btnAdd.appendChild(document.createTextNode("thêm vào giỏ hàng"))
    btnAdd.className = "addtocart"
    contentDiv.appendChild(nameProduct)
    contentDiv.appendChild(madeIn)
    contentDiv.appendChild(idProduct)
    if (clasify[0] != "phụ kiện")
        contentDiv.appendChild(selectSize(["S", "M", "L"]))
    contentDiv.appendChild(amount(inStock[0].amount, price))
    contentDiv.appendChild(btnAdd)
    divTag.appendChild(divSelect)
    divTag.appendChild(contentDiv)
    return divTag
}

function selectImage(divPreview, i, isSelected, arrImg, imgShow, path, img, scroll, offset) {
    if (i != isSelected) {
        arrImg[i].style.borderColor = "red"
        arrImg[i].style.borderRadius = "10px"
        arrImg[isSelected].style.borderColor = "gray"
        arrImg[isSelected].style.borderRadius = "0"
        imgShow.src = path + img[i]
        if (i > 0) {
            scroll = offset
        }
        divPreview.scrollTo(scroll, 0)
    }

}

function previewImg(path, img, imgShow) {
    let isSelected = 0
    let divPreview = document.createElement("div")
    let arrImg = new Array()
    let scroll = 0
    for (let i = 0; i < img.length; i++) {
        let image = document.createElement("img")
        arrImg.push(image)
        image.style.height = "80px"
        image.style.margin = "10px"
        image.style.cursor = "pointer"
        image.style.border = "1px solid gray"
        image.style.boxShadow = "box-shadow: rgba(0, 0, 0, 0.15) 0px 5px 15px 0px;"
        image.src = path + img[i]
        arrImg[isSelected].style.borderColor = "red"
        arrImg[isSelected].style.borderRadius = "10px"
        divPreview.appendChild(image)
        image.onclick = function() {
            selectImage(divPreview, i, isSelected, arrImg, imgShow, path, img, scroll, image.offsetLeft - 20)
            isSelected = i

        }
    }

    divPreview.style.overflowX = "scroll"
    divPreview.style.display = "flex"
    divPreview.style.marginBottom = "-25px"
    let div = document.createElement("div")
    div.style.overflow = "hidden"
    div.style.position = "relative"
    div.style.padding = "0 10px"
    let im = document.createElement("img")
    im.src = "Image/show-icon.png"
    im.style.height = "20px"
    im.style.position = "absolute"
    im.style.top = "45px"
    im.style.left = "-5px"
    im.style.transform = "rotate(180deg)"
    im.style.cursor = "pointer"
    im.onclick = function() {
        let i = img.length - 1
        if (isSelected > 0) {
            i = isSelected - 1
        }
        selectImage(divPreview, i, isSelected, arrImg, imgShow, path, img, scroll, 102 * (i - 3))
        isSelected = i
    }
    let imm = document.createElement("img")
    imm.style.height = "20px"
    imm.style.position = "absolute"
    imm.src = "Image/show-icon.png"
    imm.style.top = "45px"
    imm.style.right = "-5px"
    imm.style.cursor = "pointer"
    imm.onclick = function() {
        let i = 0
        if (isSelected < img.length - 1) {
            i = isSelected + 1
        }
        selectImage(divPreview, i, isSelected, arrImg, imgShow, path, img, scroll, arrImg[i].offsetLeft - 20)
        isSelected = i
            // divPreview.scrollTo(scroll, 0)

    }
    if (img.length > 4) {
        div.appendChild(im)
        div.appendChild(imm)
    }
    // arrImg.forEach(element => {
    //     console.log(element.offsetLeft)

    // });
    div.appendChild(divPreview)
    return div
}

function selectSize(index) {
    let div = document.createElement("div")
    div.style.display = "flex"
    div.style.marginTop = "10px"
    div.style.textAlign = "center"
    textSize = document.createElement("div")
    textSize.appendChild(document.createTextNode("Size"))
    textSize.style.lineHeight = "40px"
    textSize.style.marginRight = "10px"
    div.appendChild(textSize)
    let arrBut = new Array()
    let isSelected = 0
    for (let i = 0; i < index.length; i++) {
        let btnSize = document.createElement("div")
        arrBut.push(btnSize)
        btnSize.appendChild(document.createTextNode(index[i]))
        btnSize.style.padding = "5px"
        btnSize.style.width = "15px"
        btnSize.style.textAlign = "center"
        btnSize.style.cursor = "pointer"
        btnSize.style.border = "2px solid gray"
        btnSize.style.margin = "5px"
        arrBut[isSelected].style.borderColor = "red"
        btnSize.onclick = function() {
            if (i != isSelected) {
                arrBut[i].style.borderColor = "red"
                arrBut[isSelected].style.borderColor = "gray"
                isSelected = i
            }
        }
        div.appendChild(btnSize)
    }
    return div
}

function amount(current, pricee) {
    // console.log(pricee)
    let count = 1
    let div = document.createElement("div")
    let divAmou = document.createElement("div")
    divAmou.style.display = "block"
    divAmou.appendChild(div)
    div.style.display = "flex"
    div.style.textAlign = "center"
    divAmou.style.marginTop = "15px"
    let btnSub = document.createElement("button")
    btnSub.style.width = "20px"
    btnSub.style.border = "1px solid gray"
    btnSub.style.cursor = "pointer"
    btnSub.style.backgroundColor = "white"
    btnSub.onclick = function() {
        if (count > 1) {
            count--
            divshow.placeholder = count
            let price = ""
            for (let i = 0; i < pricee.toString().length; i++) {
                price += pricee.toString()[i]
            }
            divPr.textContent = "Tổng cộng: " +
                calculated(parseInt(price) * count) + " VND"
        }
    }
    btnSub.appendChild(document.createTextNode("-"))
    div.appendChild(btnSub)
    let divshow = document.createElement("input")
    divshow.style.width = "50px"
    divshow.style.border = "none"
    divshow.style.borderTop = "1px solid gray"
    divshow.style.borderBottom = "1px solid gray"
    divshow.style.outline = "none"
    divshow.style.textAlign = "center"
    divshow.placeholder = "1"
    div.appendChild(divshow)
    let btnAdd = document.createElement("button")
    btnAdd.style.width = "20px"
    btnAdd.style.border = "1px solid gray"
    btnAdd.style.cursor = "pointer"
    btnAdd.style.backgroundColor = "white"
    btnAdd.onclick = function() {
        if (count < current) {
            count++
            divshow.placeholder = count
            let price = ""
            for (let i = 0; i < pricee.toString().length; i++) {
                price += pricee.toString()[i]
            }
            divPr.textContent = "Tổng cộng: " +
                calculated(parseInt(price) * count) + " VND"
        }
    }
    btnAdd.appendChild(document.createTextNode("+"))
    div.appendChild(btnAdd)
    let text = document.createElement("div")
    text.appendChild(document.createTextNode(current + " sản phẩm có sẵn"))
    text.style.fontSize = "10px"
    text.style.color = "gray"
    text.style.marginLeft = "10px"
    text.style.display = "flex"
    text.style.flexDirection = "column"
    text.style.justifyContent = "flex-end"
    div.appendChild(text)
    let divPr = document.createElement("div")
    divPr.style.marginTop = "20px"
    divPr.appendChild(document.createTextNode("Tổng cộng: " + calculated(pricee) + " VND"))
    divAmou.appendChild(divPr)
    return divAmou
}

function calculated(price) {
    price = price.toString()
    let ar = new Array()
    for (let i = 0; i < price.length; i++) {
        if (i % 3 == 0 && i != 0) {
            ar.push(".")
        }
        ar.push(price[price.length - i - 1])
    }
    price = ""
    for (let i = ar.length - 1; i >= 0; i--) {
        price += ar[i]
    }
    return price
}
productTag.onclick = function(e) {
    if (e.target.matches('#productTag') || e.target.matches('#productTagq')) {
        showacc(onclickProduct, 0, 1200)
        setTimeout(() => {
            onclickProduct.style.display = ""
            productTag.style = ""
            document.getElementById("tagdivProduct").remove()
        }, 400);
    }
}
let currentPage = 1

function createPageNumber(idPr, product, proInpage) {
    // console.log(idPr)
    let totalProduct = product.length
    let totalPage = (totalProduct - (totalProduct % proInpage)) / proInpage + 1
    let ul = document.createElement("ul")
    ul.id = "page-number"
    let arr = new Array()
    let aArr = new Array()
    for (let i = 1; i <= totalPage; i++) {
        let li = document.createElement("li")
        arr.push(li)
        li.style.border = "1px solid gray"
        li.style.cursor = "pointer"
        li.style.margin = "10px"
        li.style.padding = "5px 10px"
        li.style.borderRadius = "5px"
        li.style.boxShadow = "rgba(0, 0, 0, 0.24) 0px 3px 8px"
        li.style.transition = "0.8s"
        let a = document.createElement("a")
            // a.style.padding = "5px 10px"
        a.style.color = "black"
        aArr.push(a)
        a.appendChild(document.createTextNode(i))
        li.onclick = function() {
            arr[currentPage - 1].style.backgroundColor = "white"
            aArr[currentPage - 1].style.color = "black"
            currentPage = parseInt(li.textContent)
            arr[currentPage - 1].style.backgroundColor = "lightpink"
            aArr[currentPage - 1].style.color = "white"
            let pos = document.documentElement.scrollTop
            let id = setInterval(function frame() {
                if (pos <= 300) {
                    clearInterval(id)
                    document.getElementById("list-product").remove()
                    document.getElementById("div-list").appendChild(addListProduct(idPr, proInpage))
                } else {
                    pos -= 10
                    document.documentElement.scrollTop = pos
                }
            }, 1)
        }
        li.onmouseenter = function() {
            li.style.borderRadius = "50px"
        }
        li.onmouseleave = function() {
            li.style.borderRadius = "5px"
        }
        li.appendChild(a)
        ul.appendChild(li)
        aArr[currentPage - 1].style.color = "white"
        arr[currentPage - 1].style.backgroundColor = "lightpink"
    }
    document.getElementById("space-product").appendChild(ul)
}

// createPageProduct("phụ kiện - balo/túi xách", 12)
// window.onscroll = function() {
//     console.log(document.documentElement.scrollTop, document.body.scrollTop)
// }